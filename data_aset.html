<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <title>Data Aset - PT SATONA</title>
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <div class="max-w-5xl mx-auto mt-10 bg-white p-8 rounded-lg shadow-md">
    <nav class="mb-6 text-center">
      <a href="index.html" class="text-blue-600 hover:underline font-medium">Tambah Data</a>
      <span class="mx-2 text-gray-400">|</span>
      <a href="data_aset.html" class="text-blue-600 hover:underline font-medium">Lihat Data</a>
    </nav>
    <h2 class="text-2xl font-bold text-center mb-6">Data Aset PT SATONA</h2>
    <div class="overflow-x-auto">
      <table id="aset-table" class="min-w-full border border-gray-200 rounded-lg">
        <thead>
          <tr class="bg-blue-600 text-white">
            <th class="py-2 px-4">Kode Aset</th>
            <th class="py-2 px-4">Nama Aset</th>
            <th class="py-2 px-4">Tanggal Perolehan</th>
            <th class="py-2 px-4">Harga Perolehan</th>
            <th class="py-2 px-4">Aksi</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.min.js"></script>
  <script src="../assets/js/toast.js"></script>
  <script>
    function formatRupiah(angka) {
      return 'Rp ' + Number(angka).toLocaleString('id-ID');
    }

    function loadAset() {
      fetch('src/pages/data_aset.php')
        .then(response => response.json())
        .then(data => {
          const tbody = document.querySelector('#aset-table tbody');
          tbody.innerHTML = '';
          if (data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="5">Belum ada data aset.</td></tr>';
            return;
          }
          data.forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
              <td class="py-2 px-4">${row.kode_aset}</td>
              <td class="py-2 px-4">${row.nama_aset}</td>
              <td class="py-2 px-4">${row.tanggal_perolehan}</td>
              <td class="py-2 px-4">${formatRupiah(row.harga_perolehan)}</td>
              <td class="py-2 px-4">
                <a href="edit_aset.php?kode_aset=${encodeURIComponent(row.kode_aset)}" class="inline-block bg-yellow-400 text-gray-900 px-3 py-1 rounded mr-2 hover:bg-yellow-300 font-semibold">Edit</a>
                <a href="hapus_aset.php?kode_aset=${encodeURIComponent(row.kode_aset)}" class="inline-block bg-red-600 text-white px-3 py-1 rounded hover:bg-red-500 font-semibold" onclick="return confirm('Yakin ingin menghapus data ini?')">Hapus</a>
              </td>
            `;
            tbody.appendChild(tr);
          });
        })
        .catch(err => {
          showToast('Gagal memuat data aset', 'error');
        });
    }

    document.addEventListener('DOMContentLoaded', loadAset);
  </script>
</body>

</html>